{"ast":null,"code":"var _jsxFileName = \"/home/madhavi/Documents/jira-assignment/JIRA-Assignment/src/component/fetch2.js\";\nimport React from 'react';\nimport FetchApi from '../utility/fetchApi';\nimport FetchTable from '../utility/fetchTable';\nimport { Button, Menu } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\n\nclass Fetch2 extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: [],\n      actualData: [],\n      length: '',\n      totalCount: []\n    };\n\n    this.componentDidMount = async () => {\n      const data1 = await this.data();\n      console.log(\"DATA 1 ===>>>\", data1);\n      const data2 = await this.data2();\n      console.log(\"Data 2  => \", data2);\n      console.log(\"updated array : \", this.state.actualData); // const data3 = await this.tableData();\n      // console.log(data3);\n    };\n\n    this.tableData = () => {\n      FetchTable.tableHeader(this.state.data);\n    };\n\n    this.data = () => {\n      return new Promise((resolve, reject) => {\n        let url = localStorage.getItem('url');\n        let arrayOfUsers = [];\n        FetchApi.callApi(\"\".concat(url, \"/rest/api/2/user/assignable/search?project=REAC\")).then(res => {\n          console.log(\"response : \", res);\n          console.log(res.length);\n\n          for (let i = 0; i < res.length; i++) {\n            arrayOfUsers.push(res[i].name);\n          }\n\n          this.setState({\n            data: arrayOfUsers\n          });\n          resolve(arrayOfUsers);\n        }).catch(error => {\n          console.log(\"error : \", error);\n          reject(error);\n        });\n      });\n    };\n\n    this.data2 = () => {\n      let url = localStorage.getItem('url');\n      let array = [];\n      return new Promise((resolve, reject) => {\n        for (let i = 0; i < this.state.data.length; i++) {\n          const api = FetchApi.callApi(\"\".concat(url, \"/rest/api/3/search?jql=assignee=\").concat(this.state.data[i]));\n          api.then(res => {\n            console.log(\"response after data fetching : \", res);\n            let inProgressStoryPointCount = 0;\n            let todoStoryPoint = 0;\n            let doneStoryPoint = 0;\n            let reviewStoryPoint = 0; //let openStoryPoint=0;\n\n            let acceptedStoryPoint = 0;\n            let resolvedStoryPoint = 0;\n            let storyPoint = 0;\n            let count = res.total;\n\n            for (let i = 0; i < count; i++) {\n              storyPoint = storyPoint + res.issues[i].fields.customfield_10024;\n\n              if (res.issues[i].fields.status.name == \"In Progress\") {\n                inProgressStoryPointCount = inProgressStoryPointCount + res.issues[i].fields.customfield_10024; //progressSum = progressSum + inProgressStoryPointCount;\n                //totalArray.push(progressSum);\n\n                console.log(\"sum : \", progressSum);\n              }\n\n              if (res.issues[i].fields.status.name == \"To Do\") {\n                todoStoryPoint = todoStoryPoint + res.issues[i].fields.customfield_10024; //todoSum = todoSum + todoStoryPoint;\n                // totalArray.push(todoSum);\n                // console.log(\"sum : \",todoSum);\n              }\n\n              if (res.issues[i].fields.status.name == \"Done\") {\n                doneStoryPoint = doneStoryPoint + res.issues[i].fields.customfield_10024; //doneSum = doneSum + doneStoryPoint;\n                // console.log(\"sum : \",doneSum);\n                // totalArray.push(doneSum);\n              }\n\n              if (res.issues[i].fields.status.name == \"Review\") {\n                reviewStoryPoint = reviewStoryPoint + res.issues[i].fields.customfield_10024; //reviewSum = reviewSum + reviewStoryPoint;\n                // console.log(\"sum : \",reviewSum);\n                // totalArray.push(reviewSum);\n              } //  if(res.body.issues[i].fields.status.name == \"Open\"){\n              //   openStoryPoint = openStoryPoint + res.body.issues[i].fields.customfield_10024;\n              // }\n\n\n              if (res.issues[i].fields.status.name == \"Accepted\") {\n                acceptedStoryPoint = acceptedStoryPoint + res.issues[i].fields.customfield_10024; //acceptedSum = acceptedSum + acceptedStoryPoint;\n                // console.log(\"sum : \",acceptedSum);\n                // totalArray.push(acceptedSum);\n              }\n\n              if (res.issues[i].fields.status.name == \"Resolved\") {\n                resolvedStoryPoint = resolvedStoryPoint + res.issues[i].fields.customfield_10024; // resolveSum = resolveSum + resolvedStoryPoint;\n                // console.log(\"sum : \",resolveSum);\n                // totalArray.push(resolveSum);\n              }\n            }\n\n            console.log(count);\n            let obj = {\n              assignee: res.issues[0].fields.assignee.name,\n              todo: todoStoryPoint,\n              //open_Story_Point:openStoryPoint,\n              accepted: acceptedStoryPoint,\n              in_Progress: inProgressStoryPointCount,\n              review: reviewStoryPoint,\n              resolved: resolvedStoryPoint,\n              done: doneStoryPoint,\n              storyPoint: storyPoint\n            };\n            let progressSum = 0;\n            let todoSum = 0;\n            let doneSum = 0;\n            let acceptedSum = 0;\n            let reviewSum = 0;\n            let resolveSum = 0;\n            progressSum + obj.in_Progress;\n            todoSum + obj.todo;\n            doneSum + obj.done;\n            acceptedSum + obj.accepted;\n            reviewSum + obj.review;\n            resolveSum + obj.resolved;\n            let totalObj = {\n              progressSum: progressSum,\n              todoSum: todoSum,\n              doneSum: doneSum,\n              acceptedSum: acceptedSum,\n              reviewSum: reviewSum,\n              resolveSum: resolveSum\n            };\n            this.setState({\n              total: [...this.state.totalCount, totalObj]\n            });\n            this.setState({\n              actualData: [...this.state.actualData, obj]\n            });\n\n            if (this.state.data.length - 1 == this.state.actualData.length - 1) {\n              resolve(array);\n            } // });\n            // console.log(\"new Array : \",this.state.newArray);\n\n          }).catch(error => {\n            console.log(\"error : \", error);\n            reject(error);\n          });\n        } //   let totalObj = {\n        //         progressSum:progressSum,\n        //      todoSum:todoSum,\n        //      doneSum:doneSum,\n        //      acceptedSum:acceptedSum,\n        //      reviewSum:reviewSum,\n        //      resolveSum:resolveSum\n        //   }\n        //   this.setState({totalCount:[...this.state.totalCount,totalObj]});\n\n      });\n    };\n\n    this.lastTable = () => {\n      this.props.history.goBack();\n    };\n  }\n\n  render() {\n    debugger;\n    let posts;\n\n    if (this.state.actualData.length > 0) {\n      posts = React.createElement(React.Fragment, null, React.createElement(\"table\", {\n        class: \"table\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        class: \"thead-dark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, FetchTable.tableHeader(this.state.actualData))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, FetchTable.tableRow(this.state.actualData)), React.createElement(\"tfoot\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, \"Total : \", FetchTable.tableFooter(this.state.totalCount))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }));\n    }\n\n    return React.createElement(React.Fragment, null, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, \"Story Points by Assignee and Status\"), React.createElement(Button, {\n      class: \"ui button\",\n      as: Link,\n      to: \"/logout\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, \"Log out\"), \"  \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }), posts, React.createElement(Button, {\n      onClick: this.lastTable,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, \"  Previous  \"));\n  }\n\n}\n\nexport default Fetch2;","map":{"version":3,"sources":["/home/madhavi/Documents/jira-assignment/JIRA-Assignment/src/component/fetch2.js"],"names":["React","FetchApi","FetchTable","Button","Menu","Link","Fetch2","Component","state","data","actualData","length","totalCount","componentDidMount","data1","console","log","data2","tableData","tableHeader","Promise","resolve","reject","url","localStorage","getItem","arrayOfUsers","callApi","then","res","i","push","name","setState","catch","error","array","api","inProgressStoryPointCount","todoStoryPoint","doneStoryPoint","reviewStoryPoint","acceptedStoryPoint","resolvedStoryPoint","storyPoint","count","total","issues","fields","customfield_10024","status","progressSum","obj","assignee","todo","accepted","in_Progress","review","resolved","done","todoSum","doneSum","acceptedSum","reviewSum","resolveSum","totalObj","lastTable","props","history","goBack","render","posts","tableRow","tableFooter"],"mappings":"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","sourcesContent":["import React from 'react';\nimport FetchApi from '../utility/fetchApi';\nimport FetchTable from '../utility/fetchTable';\nimport { Button,Menu } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\n\n\n\nclass Fetch2 extends React.Component{\n\n  state={\n        data:[],\n        actualData:[],\n        length:'',\n        totalCount:[]\n  }\n\n \n     componentDidMount =async()=>{ \n\n    const data1 = await this.data();\n    console.log(\"DATA 1 ===>>>\", data1);\n    const data2 = await this.data2();\n    console.log(\"Data 2  => \",data2);\n    console.log(\"updated array : \",this.state.actualData);\n    // const data3 = await this.tableData();\n    // console.log(data3);\n  \n    }\n\n    tableData=()=>{\n      FetchTable.tableHeader(this.state.data);\n    }\n\n    data =() =>{\n     return new Promise( (resolve, reject) => {\n      let url = localStorage.getItem('url');\n      let arrayOfUsers = [];\n      \n      FetchApi.callApi(`${url}/rest/api/2/user/assignable/search?project=REAC`).then(res => {\n        console.log(\"response : \",res);\n        console.log(res.length);\n        for(let i=0;i<res.length;i++){\n              arrayOfUsers.push(res[i].name);\n            \n            }\n            \n            this.setState({data : arrayOfUsers});\n            resolve(arrayOfUsers);\n            \n      \n      }).catch(error => {\n        console.log(\"error : \",error);\n        reject(error);\n          })\n\n     } )\n    }\n\n    data2=()=>{\n\n                \n\n      let url = localStorage.getItem('url');\n      let array = [];\n      return new Promise( (resolve, reject) => {\n\n      for(let i=0;i<this.state.data.length;i++){\n        const api = FetchApi.callApi(`${url}/rest/api/3/search?jql=assignee=${this.state.data[i]}`);\n      api.then(res => {\n        console.log(\"response after data fetching : \",res);\n        let inProgressStoryPointCount=0;\n                let todoStoryPoint=0;\n                let doneStoryPoint=0;\n                let reviewStoryPoint=0;\n                //let openStoryPoint=0;\n                let acceptedStoryPoint=0;\n                let resolvedStoryPoint=0;\n                \n\n                let storyPoint=0;\n                let count = res.total;\n                for(let i =0;i<count ;i++){\n                  storyPoint =storyPoint +  res.issues[i].fields.customfield_10024;\n                  \n                    if(res.issues[i].fields.status.name == \"In Progress\"){\n                        inProgressStoryPointCount = inProgressStoryPointCount + res.issues[i].fields.customfield_10024;\n                        //progressSum = progressSum + inProgressStoryPointCount;\n                        //totalArray.push(progressSum);\n                        console.log(\"sum : \",progressSum);\n                      }\n                    \n                     if(res.issues[i].fields.status.name == \"To Do\"){\n                        todoStoryPoint = todoStoryPoint + res.issues[i].fields.customfield_10024;\n                         //todoSum = todoSum + todoStoryPoint;\n                        // totalArray.push(todoSum);\n                        // console.log(\"sum : \",todoSum);\n                      }\n                    \n                      if(res.issues[i].fields.status.name == \"Done\"){\n                        doneStoryPoint = doneStoryPoint + res.issues[i].fields.customfield_10024;\n                         //doneSum = doneSum + doneStoryPoint;\n                        // console.log(\"sum : \",doneSum);\n                        // totalArray.push(doneSum);\n                      }\n                    \n                       if(res.issues[i].fields.status.name == \"Review\"){\n                        reviewStoryPoint = reviewStoryPoint + res.issues[i].fields.customfield_10024;\n                        //reviewSum = reviewSum + reviewStoryPoint;\n                        // console.log(\"sum : \",reviewSum);\n                        // totalArray.push(reviewSum);\n                      }\n                    \n                      //  if(res.body.issues[i].fields.status.name == \"Open\"){\n                      //   openStoryPoint = openStoryPoint + res.body.issues[i].fields.customfield_10024;\n                      // }\n                    \n                       if(res.issues[i].fields.status.name == \"Accepted\"){\n                        acceptedStoryPoint = acceptedStoryPoint + res.issues[i].fields.customfield_10024;\n                         //acceptedSum = acceptedSum + acceptedStoryPoint;\n                        // console.log(\"sum : \",acceptedSum);\n                        // totalArray.push(acceptedSum);\n                      }\n                    \n                       if(res.issues[i].fields.status.name == \"Resolved\"){\n                        resolvedStoryPoint = resolvedStoryPoint + res.issues[i].fields.customfield_10024;\n                        // resolveSum = resolveSum + resolvedStoryPoint;\n                        // console.log(\"sum : \",resolveSum);\n                        // totalArray.push(resolveSum);\n                      }\n\n                }\n                console.log(count);\n\n               \n                let obj ={\n                    \n                    assignee:res.issues[0].fields.assignee.name,\n                    todo:todoStoryPoint,\n                    //open_Story_Point:openStoryPoint,\n                    accepted:acceptedStoryPoint,\n                    in_Progress:inProgressStoryPointCount,\n                    review:reviewStoryPoint,\n                    resolved:resolvedStoryPoint,  \n                    done:doneStoryPoint,\n\n                    storyPoint:storyPoint\n                    \n                }\n\n                let progressSum=0;\n                let todoSum= 0;\n                let doneSum = 0;\n                let acceptedSum = 0;\n                let reviewSum = 0;\n                let resolveSum = 0;\n                progressSum + obj.in_Progress;\n                todoSum + obj.todo;\n                doneSum + obj.done;\n                acceptedSum + obj.accepted;\n                reviewSum +obj.review;\n                resolveSum + obj.resolved;\n\n                let totalObj = {\n                        progressSum:progressSum,\n                         todoSum:todoSum,\n                         doneSum:doneSum,\n                         acceptedSum:acceptedSum,\n                         reviewSum:reviewSum,\n                         resolveSum:resolveSum\n                \n                      }\n\n                this.setState({total:[...this.state.totalCount,totalObj]})\n                this.setState({actualData:[...this.state.actualData,obj]});\n                \n                if(this.state.data.length-1 == this.state.actualData.length-1){\n          resolve(array);\n        }\n                // });\n                // console.log(\"new Array : \",this.state.newArray);\n        \n      }).catch(error => {\n        console.log(\"error : \",error);\n        reject(error);\n          })\n      }  \n    //   let totalObj = {\n    //         progressSum:progressSum,\n    //      todoSum:todoSum,\n    //      doneSum:doneSum,\n    //      acceptedSum:acceptedSum,\n    //      reviewSum:reviewSum,\n    //      resolveSum:resolveSum\n\n    //   }\n\n    //   this.setState({totalCount:[...this.state.totalCount,totalObj]});\n    \n        })\n      \n        \n    }\n    \n    lastTable=()=>{\n        this.props.history.goBack();\n    }\n   \n   \n  render(){\n    debugger;\n    let posts ;\n    if(this.state.actualData.length > 0) {\n      posts =   <>\n        <table class=\"table\">\n          <thead class=\"thead-dark\">\n            <tr>\n              {FetchTable.tableHeader(this.state.actualData)}\n            </tr>\n          </thead>\n          <tbody>\n              {FetchTable.tableRow(this.state.actualData)}\n          </tbody>\n          <tfoot>\n              Total : {FetchTable.tableFooter(this.state.totalCount)}\n          </tfoot>\n        </table> \n        <hr/>\n        <br/>\n        \n        \n        </>\n    }\n  \n  return(\n      <><br />\n  <h1>Story Points by Assignee and Status</h1>\n  <Button class=\"ui button\"  as={Link} to ='/logout'>Log out</Button>  <br /><br />\n  {posts}\n  <Button onClick={this.lastTable}>  Previous  </Button>\n\n      </>\n\n    )\n  }\n}\n\n\nexport default Fetch2;\n"]},"metadata":{},"sourceType":"module"}