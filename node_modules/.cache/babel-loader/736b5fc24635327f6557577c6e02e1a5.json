{"ast":null,"code":"var _jsxFileName = \"/home/madhavi/Documents/jira-assignment/JIRA-Assignment/src/component/fetch.js\";\nimport React from 'react';\nimport FetchApi from '../utility/fetchApi';\n\nclass Fetch extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: null,\n      actualData: [],\n      length: ''\n    };\n\n    this.data = () => {\n      let url = localStorage.getItem('url');\n      let arrayOfUsers = [];\n      const api = FetchApi.callApi(\"\".concat(url, \"/rest/api/2/user/assignable/search?project=REAC\"));\n      api.then(res => {\n        console.log(\"response : \", res);\n        console.log(res.length);\n\n        for (let i = 0; i < res.length; i++) {\n          arrayOfUsers.push(res[i].key);\n        }\n\n        this.setState({\n          length: arrayOfUsers.length\n        });\n        return arrayOfUsers; //console.log(\"array : \",arrayOfUsers);\n      }).catch(error => {\n        console.log(\"error : \", error);\n      });\n      return arrayOfUsers;\n    };\n\n    this.data2 = () => {\n      let url = localStorage.getItem('url');\n      let array = [];\n\n      for (let i = 0; i < this.state.length; i++) {\n        const api = FetchApi.callApi(\"\".concat(url, \"/rest/api/3/search?jql=assignee=admin\"));\n        api.then(res => {\n          array.push(res);\n          console.log(\"pushed array : \", array);\n          return array;\n        }).catch(error => {\n          console.log(\"error : \", error);\n        });\n        return array;\n      }\n    };\n  }\n\n  async componentDidMount() {\n    // const response = await \n    const api = await this.data();\n    console.log(\"api\", api);\n    const api2 = await this.data2();\n    console.log(\"api2 \", api2);\n  }\n\n  // if(arrayOfUsers.length == 5){\n  //   for(let i=0;i<5;i++){\n  //     const anotherApi =  FetchApi.callApi(`${url}/rest/api/3/search?jql=assignee=${arrayOfUsers[i]}`);\n  //     anotherApi.then(response => {\n  //       console.log(\"response : \",response);\n  //     })\n  //   }\n  // }\n  // <FetchApi url='https://madhvi.atlassian.net/rest/api/2/user/assignable/search?project=REAC'/>\n  //url ={'https://madhvi.atlassian.net/rest/api/2/user/assignable/search?project=REAC'}/>\n  //   // superagent\n  //   // .get(`https://madhvi.atlassian.net/rest/api/2/user/assignable/search?project=REAC`)\n  //   // .set('Access-Control-Allow-Credentials', '*')\n  //   // .set('Accept', 'application/json')\n  //   // .set('Authorization', 'Basic dmFpc2huYXZpLmphd2FuamFsQGN1ZWxvZ2ljLmNvbTo3NmNVSXByaXVDaDlpTm1jZHJXZTA3RDQ=')\n  //   console.log(\"response : \",response.body.length);\n  //   for(let i=0;i<response.body.length;i++){\n  //     arrayOfUsers.push(response.body[i].key);\n  //   }\n  //   console.log(\"array : \",arrayOfUsers);\n  //   for(let i=0;i<arrayOfUsers.length;i++){\n  //     const re = await \n  //     superagent\n  //     .get(`https://madhvi.atlassian.net/rest/api/3/search?jql=assignee=${arrayOfUsers[i]}`)\n  //     .set('Access-Control-Allow-Credentials', '*')\n  //     .set('Accept', 'application/json')\n  //     .set('Authorization', 'Basic dmFpc2huYXZpLmphd2FuamFsQGN1ZWxvZ2ljLmNvbTo3NmNVSXByaXVDaDlpTm1jZHJXZTA3RDQ=')\n  //     .end((err, res) => {\n  //       if (err) { return console.log(\"error : \",err); }\n  //       console.log(\"url 2 \");\n  //     let timeOriginalEstimate = 0;\n  //     let storyPoint=0;\n  //     let timeEstimate=0;\n  //     let timeSpent=0;\n  //     let count = res.body.total;\n  //     for(let i =0;i<count ;i++){\n  //         storyPoint =storyPoint +  res.body.issues[i].fields.customfield_10024;\n  //         timeEstimate = timeEstimate + res.body.issues[i].fields.timeestimate;\n  //         timeSpent = timeSpent + res.body.issues[i].fields.timespent;\n  //         timeOriginalEstimate = timeOriginalEstimate + res.body.issues[i].fields.timeoriginalestimate;\n  //     }\n  //    obj ={\n  //         total : res.body.total,\n  //         user:res.body.issues[0].fields.assignee.name,\n  //         timeOriginalEstimate:timeOriginalEstimate/3600,\n  //         storyPoint:storyPoint,\n  //         timeEstimate:timeEstimate/3600,\n  //         timeSpent:timeSpent/3600\n  //         // issueLength:res.body.issue.length()\n  //     }\n  //     dataOfUsers.push(obj);\n  //     })\n  //   }\n  //   //this.setState({actualData:obj});\n  //   this.setState({actualData:dataOfUsers});\n  //   console.log(\"this.state.actualData : \", this.state.actualData);\n  // }\n  // getKeys=() => {\n  //   console.log(\"get \");\n  render() {\n    //debugger;\n    let posts = React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, this.state.actualData.map(id => React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, id.user)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, id.timeOriginalEstimate)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, id.timeEstimate)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, id.storyPoint)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, id.timeSpent)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, id.total)))));\n    return React.createElement(React.Fragment, null, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"Show\"), posts);\n  }\n\n}\n\nexport default Fetch;","map":{"version":3,"sources":["/home/madhavi/Documents/jira-assignment/JIRA-Assignment/src/component/fetch.js"],"names":["React","FetchApi","Fetch","Component","state","data","actualData","length","url","localStorage","getItem","arrayOfUsers","api","callApi","then","res","console","log","i","push","key","setState","catch","error","data2","array","componentDidMount","api2","render","posts","map","id","user","timeOriginalEstimate","timeEstimate","storyPoint","timeSpent","total"],"mappings":"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","sourcesContent":["import React from 'react';\nimport FetchApi from '../utility/fetchApi';\nclass Fetch extends React.Component{\n\n  state={\n        data:null,\n        actualData:[],\n        length:''\n  }\n\n \n    async componentDidMount (){ \n     \n      // const response = await \n\n    const api = await this.data();\n    console.log(\"api\" ,api );\n    const api2 = await this.data2();\n    console.log(\"api2 \",api2);\n    }\n\n\n    data =() =>{\n      let url = localStorage.getItem('url');\n      let arrayOfUsers = [];\n      const api = FetchApi.callApi(`${url}/rest/api/2/user/assignable/search?project=REAC`);\n      api.then(res => {\n        console.log(\"response : \",res);\n        console.log(res.length);\n        for(let i=0;i<res.length;i++){\n              arrayOfUsers.push(res[i].key);\n              \n            }\n            this.setState({length : arrayOfUsers.length});\n            return arrayOfUsers;\n            //console.log(\"array : \",arrayOfUsers);\n      \n      }).catch(error => {\n        console.log(\"error : \",error);\n          })\n          return arrayOfUsers;\n    }\n\n    data2=()=>{\n      let url = localStorage.getItem('url');\n      let array = [];\n      for(let i=0;i<this.state.length;i++){\n        const api = FetchApi.callApi(`${url}/rest/api/3/search?jql=assignee=admin`);\n      api.then(res => {\n        array.push(res);\n        console.log(\"pushed array : \",array);\n        return array;\n      }).catch(error => {\n        console.log(\"error : \",error);\n          })\n          return array;\n      }\n      \n\n    }\n        // if(arrayOfUsers.length == 5){\n        //   for(let i=0;i<5;i++){\n        //     const anotherApi =  FetchApi.callApi(`${url}/rest/api/3/search?jql=assignee=${arrayOfUsers[i]}`);\n        //     anotherApi.then(response => {\n        //       console.log(\"response : \",response);\n        //     })\n        //   }\n         \n        // }\n         \n        \n        \n        \n    // <FetchApi url='https://madhvi.atlassian.net/rest/api/2/user/assignable/search?project=REAC'/>\n    //url ={'https://madhvi.atlassian.net/rest/api/2/user/assignable/search?project=REAC'}/>\n  //   // superagent\n  //   // .get(`https://madhvi.atlassian.net/rest/api/2/user/assignable/search?project=REAC`)\n  //   // .set('Access-Control-Allow-Credentials', '*')\n  //   // .set('Accept', 'application/json')\n  //   // .set('Authorization', 'Basic dmFpc2huYXZpLmphd2FuamFsQGN1ZWxvZ2ljLmNvbTo3NmNVSXByaXVDaDlpTm1jZHJXZTA3RDQ=')\n   \n  //   console.log(\"response : \",response.body.length);\n  //   for(let i=0;i<response.body.length;i++){\n  //     arrayOfUsers.push(response.body[i].key);\n      \n  //   }\n  //   console.log(\"array : \",arrayOfUsers);\n    \n  //   for(let i=0;i<arrayOfUsers.length;i++){\n  //     const re = await \n  //     superagent\n  //     .get(`https://madhvi.atlassian.net/rest/api/3/search?jql=assignee=${arrayOfUsers[i]}`)\n  //     .set('Access-Control-Allow-Credentials', '*')\n  //     .set('Accept', 'application/json')\n  //     .set('Authorization', 'Basic dmFpc2huYXZpLmphd2FuamFsQGN1ZWxvZ2ljLmNvbTo3NmNVSXByaXVDaDlpTm1jZHJXZTA3RDQ=')\n     \n  //     .end((err, res) => {\n  //       if (err) { return console.log(\"error : \",err); }\n  //       console.log(\"url 2 \");\n  //     let timeOriginalEstimate = 0;\n  //     let storyPoint=0;\n  //     let timeEstimate=0;\n  //     let timeSpent=0;\n  //     let count = res.body.total;\n  //     for(let i =0;i<count ;i++){\n  //         storyPoint =storyPoint +  res.body.issues[i].fields.customfield_10024;\n  //         timeEstimate = timeEstimate + res.body.issues[i].fields.timeestimate;\n  //         timeSpent = timeSpent + res.body.issues[i].fields.timespent;\n  //         timeOriginalEstimate = timeOriginalEstimate + res.body.issues[i].fields.timeoriginalestimate;\n  //     }\n      \n  //    obj ={\n  //         total : res.body.total,\n  //         user:res.body.issues[0].fields.assignee.name,\n  //         timeOriginalEstimate:timeOriginalEstimate/3600,\n  //         storyPoint:storyPoint,\n  //         timeEstimate:timeEstimate/3600,\n  //         timeSpent:timeSpent/3600\n  //         // issueLength:res.body.issue.length()\n  //     }\n  //     dataOfUsers.push(obj);\n  //     })\n  //   }\n  //   //this.setState({actualData:obj});\n    \n  //   this.setState({actualData:dataOfUsers});\n  //   console.log(\"this.state.actualData : \", this.state.actualData);\n   \n  // }\n\n  // getKeys=() => {\n  //   console.log(\"get \");\n  \n\n  render(){\n    //debugger;\n    let posts = <table>\n    \n    {/* <tr>\n      <th>{this.getKeys()}</th>\n    </tr> */}\n    {this.state.actualData.map(id => (\n      <tr>\n         <td><b>{id.user}</b></td>\n         <td><b>{id.timeOriginalEstimate}</b></td>\n         <td><b>{id.timeEstimate}</b></td>\n         <td><b>{id.storyPoint}</b></td>\n         <td><b>{id.timeSpent}</b></td>\n         <td><b>{id.total}</b></td>\n      </tr>\n       \n    ))}\n  \n  </table>\n    return(\n      <>\n  <h1>Show</h1>\n  {posts}\n      \n      </>\n\n    )\n  }\n}\n\n\nexport default Fetch;"]},"metadata":{},"sourceType":"module"}