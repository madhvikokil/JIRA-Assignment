{"ast":null,"code":"var _jsxFileName = \"/home/madhavi/Documents/jira-assignment/JIRA-Assignment/src/Projects/container/tableTwo.js\";\nimport React from 'react';\nimport FetchApi from '../../utility/apiCalls';\nimport FetchTable from '../../utility/tableContent';\nimport { Button } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\nimport '../../Assets/tableEdit.css';\nimport Chart from '../../Charts/component/chart';\nimport Chart2 from '../../Charts/component/chart2';\n\nclass Fetch2 extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: [],\n      actualData: [],\n      length: '',\n      totalCount: []\n    };\n\n    this.componentDidMount = async () => {\n      const data1 = await this.data();\n      console.log(\"DATA 1 ===>>>\", data1);\n      const data2 = await this.data2();\n      console.log(\"Data 2  => \", data2);\n      console.log(\"updated array : \", this.state.actualData);\n    };\n\n    this.tableData = () => {\n      FetchTable.tableHeader(this.state.data);\n    };\n\n    this.data = () => {\n      let project = localStorage.getItem('project');\n      return new Promise((resolve, reject) => {\n        let url = localStorage.getItem('url');\n        let arrayOfUsers = [];\n        FetchApi.callApi(\"\".concat(url, \"/rest/api/2/user/assignable/search?project=\").concat(project)).then(res => {\n          for (let i = 0; i < res.length; i++) {\n            arrayOfUsers.push(res[i].name);\n          }\n\n          this.setState({\n            data: arrayOfUsers\n          });\n          resolve(arrayOfUsers);\n        }).catch(error => {\n          reject(error);\n        });\n      });\n    };\n\n    this.data2 = () => {\n      let project = localStorage.getItem('project');\n      let url = localStorage.getItem('url');\n      let array = [];\n      return new Promise((resolve, reject) => {\n        for (let i = 0; i < this.state.data.length; i++) {\n          const api = FetchApi.callApi(\"\".concat(url, \"/rest/api/3/search?jql=assignee=\").concat(this.state.data[i]));\n          api.then(res => {\n            let inProgressStoryPointCount = 0;\n            let todoStoryPoint = 0;\n            let doneStoryPoint = 0;\n            let reviewStoryPoint = 0;\n            let acceptedStoryPoint = 0;\n            let resolvedStoryPoint = 0;\n            let inProgressSum = 0;\n            let acceptedSum = 0;\n            let todoSum = 0;\n            let reviewSum = 0;\n            let resolvedSum = 0;\n            let doneSum = 0;\n            let storyPointSum = 0;\n            let anotherArray = [];\n            let storyPoint = 0;\n            let count = res.total;\n\n            for (let i = 0; i < count; i++) {\n              if (res.issues[i].fields.project.key === \"\".concat([project])) {\n                anotherArray.push(res.issues[i].fields.assignee.name);\n                storyPoint = storyPoint + res.issues[i].fields.customfield_10024;\n\n                if (res.issues[i].fields.status.name === \"In Progress\") {\n                  inProgressStoryPointCount = inProgressStoryPointCount + res.issues[i].fields.customfield_10024;\n                }\n\n                if (res.issues[i].fields.status.name === \"To Do\" || res.issues[i].fields.status.name === \"Open\") {\n                  todoStoryPoint = todoStoryPoint + res.issues[i].fields.customfield_10024;\n                }\n\n                if (res.issues[i].fields.status.name === \"Done\") {\n                  doneStoryPoint = doneStoryPoint + res.issues[i].fields.customfield_10024;\n                }\n\n                if (res.issues[i].fields.status.name === \"Review\") {\n                  reviewStoryPoint = reviewStoryPoint + res.issues[i].fields.customfield_10024;\n                }\n\n                if (res.issues[i].fields.status.name === \"Accepted\") {\n                  acceptedStoryPoint = acceptedStoryPoint + res.issues[i].fields.customfield_10024;\n                }\n\n                if (res.issues[i].fields.status.name === \"Resolved\") {\n                  resolvedStoryPoint = resolvedStoryPoint + res.issues[i].fields.customfield_10024;\n                }\n              }\n            }\n\n            let obj = {\n              assignee: res.issues[0].fields.assignee.name,\n              open: todoStoryPoint,\n              accepted: acceptedStoryPoint,\n              in_Progress: inProgressStoryPointCount,\n              review: reviewStoryPoint,\n              resolved: resolvedStoryPoint,\n              done: doneStoryPoint,\n              story_point: storyPoint\n            };\n            this.setState({\n              actualData: [...this.state.actualData, obj]\n            });\n\n            if (this.state.data.length - 1 === this.state.actualData.length - 1) {\n              for (let i = 0; i < this.state.actualData.length; i++) {\n                inProgressSum = inProgressSum + this.state.actualData[i].in_Progress;\n                acceptedSum = acceptedSum + this.state.actualData[i].accepted;\n                todoSum = todoSum + this.state.actualData[i].open;\n                reviewSum = reviewSum + this.state.actualData[i].review;\n                resolvedSum = resolvedSum + this.state.actualData[i].resolved;\n                doneSum = doneSum + this.state.actualData[i].done;\n                storyPointSum = storyPointSum + this.state.actualData[i].story_point;\n              }\n\n              let obj2 = {\n                todoSum: todoSum,\n                acceptedSum: acceptedSum,\n                inProgressSum: inProgressSum,\n                reviewSum: reviewSum,\n                resolvedSum: resolvedSum,\n                doneSum: doneSum,\n                storyPointSum: storyPointSum\n              };\n              this.setState({\n                totalCount: obj2\n              });\n              localStorage.setItem('sum', JSON.stringify(obj2));\n              resolve(array);\n            }\n          }).catch(error => {\n            reject(error);\n          });\n        }\n      });\n    };\n\n    this.lastTable = () => {\n      this.props.history.goBack();\n    };\n  }\n\n  render() {\n    //debugger;\n    let posts;\n\n    if (this.state.actualData.length > 0) {\n      posts = React.createElement(React.Fragment, null, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        class: \"tableHeader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, \"Story Points by Assignee and Status\"), React.createElement(\"table\", {\n        class: \"table\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        class: \"headerStyle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, FetchTable.tableHeader(this.state.actualData))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, FetchTable.tableRow(this.state.actualData)), this.state.totalCount ? React.createElement(\"tfoot\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        class: \"specificRowBackground\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        class: \"editRow \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, \"Total:\"), \" \"), FetchTable.tableFooter(this.state.totalCount)), React.createElement(\"tr\", {\n        class: \"editRow  \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, localStorage.getItem('total'), \" total issues\"))) : null), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }));\n    }\n\n    return React.createElement(React.Fragment, null, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }), React.createElement(Button, {\n      class: \"ui button\",\n      style: {\n        float: 'left'\n      },\n      as: Link,\n      to: \"/tablesheet\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \"Project List\"), React.createElement(Button, {\n      class: \"ui button\",\n      style: {\n        float: 'right'\n      },\n      as: Link,\n      to: \"/logout\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, \"Log out\"), \"  \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }), posts, React.createElement(Button, {\n      onClick: this.lastTable,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, \"  Previous  \"), this.state.totalCount.todoSum ? React.createElement(Chart, {\n      data: this.state.totalCount,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }) : null, this.state.totalCount.todoSum ? React.createElement(Chart2, {\n      data: this.state.totalCount,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }) : null);\n  }\n\n}\n\nexport default Fetch2;","map":{"version":3,"sources":["/home/madhavi/Documents/jira-assignment/JIRA-Assignment/src/Projects/container/tableTwo.js"],"names":["React","FetchApi","FetchTable","Button","Link","Chart","Chart2","Fetch2","Component","state","data","actualData","length","totalCount","componentDidMount","data1","console","log","data2","tableData","tableHeader","project","localStorage","getItem","Promise","resolve","reject","url","arrayOfUsers","callApi","then","res","i","push","name","setState","catch","error","array","api","inProgressStoryPointCount","todoStoryPoint","doneStoryPoint","reviewStoryPoint","acceptedStoryPoint","resolvedStoryPoint","inProgressSum","acceptedSum","todoSum","reviewSum","resolvedSum","doneSum","storyPointSum","anotherArray","storyPoint","count","total","issues","fields","key","assignee","customfield_10024","status","obj","open","accepted","in_Progress","review","resolved","done","story_point","obj2","setItem","JSON","stringify","lastTable","props","history","goBack","render","posts","tableRow","tableFooter","float"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,UAAP,MAAuB,4BAAvB;AACA,SAASC,MAAT,QAAuB,mBAAvB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAO,4BAAP;AACA,OAAOC,KAAP,MAAkB,8BAAlB;AACA,OAAOC,MAAP,MAAmB,+BAAnB;;AAGA,MAAMC,MAAN,SAAqBP,KAAK,CAACQ,SAA3B,CAAoC;AAAA;AAAA;AAAA,SAElCC,KAFkC,GAE5B;AACAC,MAAAA,IAAI,EAAC,EADL;AAEAC,MAAAA,UAAU,EAAC,EAFX;AAGAC,MAAAA,MAAM,EAAC,EAHP;AAIAC,MAAAA,UAAU,EAAC;AAJX,KAF4B;;AAAA,SASlCC,iBATkC,GASf,YAAS;AAE1B,YAAMC,KAAK,GAAG,MAAM,KAAKL,IAAL,EAApB;AACAM,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BF,KAA7B;AACA,YAAMG,KAAK,GAAG,MAAM,KAAKA,KAAL,EAApB;AACAF,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA0BC,KAA1B;AACAF,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAA+B,KAAKR,KAAL,CAAWE,UAA1C;AACC,KAhB+B;;AAAA,SAkBhCQ,SAlBgC,GAkBtB,MAAI;AACZjB,MAAAA,UAAU,CAACkB,WAAX,CAAuB,KAAKX,KAAL,CAAWC,IAAlC;AACD,KApB+B;;AAAA,SAsBhCA,IAtBgC,GAsB1B,MAAK;AACT,UAAIW,OAAO,GAAGC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAd;AACD,aAAO,IAAIC,OAAJ,CAAa,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACxC,YAAIC,GAAG,GAAGL,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAV;AACA,YAAIK,YAAY,GAAG,EAAnB;AAEA3B,QAAAA,QAAQ,CAAC4B,OAAT,WAAoBF,GAApB,wDAAqEN,OAArE,GAAgFS,IAAhF,CAAqFC,GAAG,IAAI;AAC1F,eAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACD,GAAG,CAACnB,MAAlB,EAAyBoB,CAAC,EAA1B,EAA6B;AACvBJ,YAAAA,YAAY,CAACK,IAAb,CAAkBF,GAAG,CAACC,CAAD,CAAH,CAAOE,IAAzB;AACD;;AACD,eAAKC,QAAL,CAAc;AAACzB,YAAAA,IAAI,EAAGkB;AAAR,WAAd;AACAH,UAAAA,OAAO,CAACG,YAAD,CAAP;AAED,SAPL,EAOOQ,KAPP,CAOaC,KAAK,IAAI;AACpBX,UAAAA,MAAM,CAACW,KAAD,CAAN;AACG,SATL;AAWA,OAfM,CAAP;AAgBA,KAxC+B;;AAAA,SA0ChCnB,KA1CgC,GA0C1B,MAAI;AACR,UAAIG,OAAO,GAAGC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAd;AACA,UAAII,GAAG,GAAGL,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAV;AACA,UAAIe,KAAK,GAAG,EAAZ;AACA,aAAO,IAAId,OAAJ,CAAa,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAEzC,aAAI,IAAIM,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKvB,KAAL,CAAWC,IAAX,CAAgBE,MAA9B,EAAqCoB,CAAC,EAAtC,EAAyC;AACvC,gBAAMO,GAAG,GAAGtC,QAAQ,CAAC4B,OAAT,WAAoBF,GAApB,6CAA0D,KAAKlB,KAAL,CAAWC,IAAX,CAAgBsB,CAAhB,CAA1D,EAAZ;AACFO,UAAAA,GAAG,CAACT,IAAJ,CAASC,GAAG,IAAI;AACN,gBAAIS,yBAAyB,GAAG,CAAhC;AACA,gBAAIC,cAAc,GAAG,CAArB;AACA,gBAAIC,cAAc,GAAG,CAArB;AACA,gBAAIC,gBAAgB,GAAG,CAAvB;AACA,gBAAIC,kBAAkB,GAAG,CAAzB;AACA,gBAAIC,kBAAkB,GAAG,CAAzB;AACA,gBAAIC,aAAa,GAAG,CAApB;AACA,gBAAIC,WAAW,GAAG,CAAlB;AACA,gBAAIC,OAAO,GAAG,CAAd;AACA,gBAAIC,SAAS,GAAG,CAAhB;AACA,gBAAIC,WAAW,GAAG,CAAlB;AACA,gBAAIC,OAAO,GAAG,CAAd;AACA,gBAAIC,aAAa,GAAG,CAApB;AACA,gBAAIC,YAAY,GAAG,EAAnB;AACA,gBAAIC,UAAU,GAAG,CAAjB;AACA,gBAAIC,KAAK,GAAGxB,GAAG,CAACyB,KAAhB;;AAEA,iBAAI,IAAIxB,CAAC,GAAE,CAAX,EAAaA,CAAC,GAACuB,KAAf,EAAsBvB,CAAC,EAAvB,EAA0B;AACxB,kBAAGD,GAAG,CAAC0B,MAAJ,CAAWzB,CAAX,EAAc0B,MAAd,CAAqBrC,OAArB,CAA6BsC,GAA7B,eAAyC,CAACtC,OAAD,CAAzC,CAAH,EAAwD;AACtDgC,gBAAAA,YAAY,CAACpB,IAAb,CAAkBF,GAAG,CAAC0B,MAAJ,CAAWzB,CAAX,EAAc0B,MAAd,CAAqBE,QAArB,CAA8B1B,IAAhD;AACAoB,gBAAAA,UAAU,GAAEA,UAAU,GAAIvB,GAAG,CAAC0B,MAAJ,CAAWzB,CAAX,EAAc0B,MAAd,CAAqBG,iBAA/C;;AAEA,oBAAG9B,GAAG,CAAC0B,MAAJ,CAAWzB,CAAX,EAAc0B,MAAd,CAAqBI,MAArB,CAA4B5B,IAA5B,KAAqC,aAAxC,EAAsD;AAClDM,kBAAAA,yBAAyB,GAAGA,yBAAyB,GAAGT,GAAG,CAAC0B,MAAJ,CAAWzB,CAAX,EAAc0B,MAAd,CAAqBG,iBAA7E;AAED;;AAEF,oBAAG9B,GAAG,CAAC0B,MAAJ,CAAWzB,CAAX,EAAc0B,MAAd,CAAqBI,MAArB,CAA4B5B,IAA5B,KAAqC,OAArC,IAAgDH,GAAG,CAAC0B,MAAJ,CAAWzB,CAAX,EAAc0B,MAAd,CAAqBI,MAArB,CAA4B5B,IAA5B,KAAqC,MAAxF,EAA+F;AAC5FO,kBAAAA,cAAc,GAAGA,cAAc,GAAGV,GAAG,CAAC0B,MAAJ,CAAWzB,CAAX,EAAc0B,MAAd,CAAqBG,iBAAvD;AAED;;AAED,oBAAG9B,GAAG,CAAC0B,MAAJ,CAAWzB,CAAX,EAAc0B,MAAd,CAAqBI,MAArB,CAA4B5B,IAA5B,KAAqC,MAAxC,EAA+C;AAC7CQ,kBAAAA,cAAc,GAAGA,cAAc,GAAGX,GAAG,CAAC0B,MAAJ,CAAWzB,CAAX,EAAc0B,MAAd,CAAqBG,iBAAvD;AAED;;AAEA,oBAAG9B,GAAG,CAAC0B,MAAJ,CAAWzB,CAAX,EAAc0B,MAAd,CAAqBI,MAArB,CAA4B5B,IAA5B,KAAqC,QAAxC,EAAiD;AAChDS,kBAAAA,gBAAgB,GAAGA,gBAAgB,GAAGZ,GAAG,CAAC0B,MAAJ,CAAWzB,CAAX,EAAc0B,MAAd,CAAqBG,iBAA3D;AAED;;AAEA,oBAAG9B,GAAG,CAAC0B,MAAJ,CAAWzB,CAAX,EAAc0B,MAAd,CAAqBI,MAArB,CAA4B5B,IAA5B,KAAqC,UAAxC,EAAmD;AAClDU,kBAAAA,kBAAkB,GAAGA,kBAAkB,GAAGb,GAAG,CAAC0B,MAAJ,CAAWzB,CAAX,EAAc0B,MAAd,CAAqBG,iBAA/D;AACD;;AAEA,oBAAG9B,GAAG,CAAC0B,MAAJ,CAAWzB,CAAX,EAAc0B,MAAd,CAAqBI,MAArB,CAA4B5B,IAA5B,KAAqC,UAAxC,EAAmD;AAClDW,kBAAAA,kBAAkB,GAAGA,kBAAkB,GAAGd,GAAG,CAAC0B,MAAJ,CAAWzB,CAAX,EAAc0B,MAAd,CAAqBG,iBAA/D;AACD;AAEJ;AAIF;;AAGF,gBAAIE,GAAG,GAAE;AAEJH,cAAAA,QAAQ,EAAC7B,GAAG,CAAC0B,MAAJ,CAAW,CAAX,EAAcC,MAAd,CAAqBE,QAArB,CAA8B1B,IAFnC;AAGJ8B,cAAAA,IAAI,EAACvB,cAHD;AAIJwB,cAAAA,QAAQ,EAACrB,kBAJL;AAKJsB,cAAAA,WAAW,EAAC1B,yBALR;AAMJ2B,cAAAA,MAAM,EAACxB,gBANH;AAOJyB,cAAAA,QAAQ,EAACvB,kBAPL;AAQJwB,cAAAA,IAAI,EAAC3B,cARD;AAUJ4B,cAAAA,WAAW,EAAChB;AAVR,aAAT;AAcC,iBAAKnB,QAAL,CAAc;AAACxB,cAAAA,UAAU,EAAC,CAAC,GAAG,KAAKF,KAAL,CAAWE,UAAf,EAA0BoD,GAA1B;AAAZ,aAAd;;AAEA,gBAAG,KAAKtD,KAAL,CAAWC,IAAX,CAAgBE,MAAhB,GAAuB,CAAvB,KAA6B,KAAKH,KAAL,CAAWE,UAAX,CAAsBC,MAAtB,GAA6B,CAA7D,EAA+D;AAC7D,mBAAI,IAAIoB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKvB,KAAL,CAAWE,UAAX,CAAsBC,MAApC,EAA2CoB,CAAC,EAA5C,EAA+C;AAC7Cc,gBAAAA,aAAa,GAAGA,aAAa,GAAG,KAAKrC,KAAL,CAAWE,UAAX,CAAsBqB,CAAtB,EAAyBkC,WAAzD;AACAnB,gBAAAA,WAAW,GAAGA,WAAW,GAAG,KAAKtC,KAAL,CAAWE,UAAX,CAAsBqB,CAAtB,EAAyBiC,QAArD;AACAjB,gBAAAA,OAAO,GAAGA,OAAO,GAAG,KAAKvC,KAAL,CAAWE,UAAX,CAAsBqB,CAAtB,EAAyBgC,IAA7C;AACAf,gBAAAA,SAAS,GAAGA,SAAS,GAAG,KAAKxC,KAAL,CAAWE,UAAX,CAAsBqB,CAAtB,EAAyBmC,MAAjD;AACAjB,gBAAAA,WAAW,GAAGA,WAAW,GAAG,KAAKzC,KAAL,CAAWE,UAAX,CAAsBqB,CAAtB,EAAyBoC,QAArD;AACAjB,gBAAAA,OAAO,GAAGA,OAAO,GAAG,KAAK1C,KAAL,CAAWE,UAAX,CAAsBqB,CAAtB,EAAyBqC,IAA7C;AACAjB,gBAAAA,aAAa,GAAGA,aAAa,GAAG,KAAK3C,KAAL,CAAWE,UAAX,CAAsBqB,CAAtB,EAAyBsC,WAAzD;AACD;;AACD,kBAAIC,IAAI,GAAG;AACTvB,gBAAAA,OAAO,EAAEA,OADA;AAETD,gBAAAA,WAAW,EAAEA,WAFJ;AAGTD,gBAAAA,aAAa,EAACA,aAHL;AAITG,gBAAAA,SAAS,EAAEA,SAJF;AAKTC,gBAAAA,WAAW,EAAEA,WALJ;AAMTC,gBAAAA,OAAO,EAAEA,OANA;AAOTC,gBAAAA,aAAa,EAACA;AAPL,eAAX;AASF,mBAAKjB,QAAL,CAAc;AAACtB,gBAAAA,UAAU,EAAC0D;AAAZ,eAAd;AACAjD,cAAAA,YAAY,CAACkD,OAAb,CAAqB,KAArB,EAA2BC,IAAI,CAACC,SAAL,CAAeH,IAAf,CAA3B;AACA9C,cAAAA,OAAO,CAACa,KAAD,CAAP;AACH;AAEN,WAlGD,EAkGGF,KAlGH,CAkGSC,KAAK,IAAI;AAChBX,YAAAA,MAAM,CAACW,KAAD,CAAN;AACG,WApGL;AAqGC;AACF,OA1GQ,CAAP;AA2GH,KAzJiC;;AAAA,SA2JhCsC,SA3JgC,GA2JtB,MAAI;AACV,WAAKC,KAAL,CAAWC,OAAX,CAAmBC,MAAnB;AACH,KA7J+B;AAAA;;AAiKlCC,EAAAA,MAAM,GAAE;AACN;AACA,QAAIC,KAAJ;;AACA,QAAG,KAAKvE,KAAL,CAAWE,UAAX,CAAsBC,MAAtB,GAA+B,CAAlC,EAAqC;AACnCoE,MAAAA,KAAK,GAAK,0CAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAF,EACV;AAAG,QAAA,KAAK,EAAC,aAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CADU,EAER;AAAO,QAAA,KAAK,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAO,QAAA,KAAK,EAAC,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG9E,UAAU,CAACkB,WAAX,CAAuB,KAAKX,KAAL,CAAWE,UAAlC,CADH,CADF,CADF,EAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACKT,UAAU,CAAC+E,QAAX,CAAoB,KAAKxE,KAAL,CAAWE,UAA/B,CADL,CAPF,EAUC,KAAKF,KAAL,CAAWI,UAAX,GAEC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAI,QAAA,KAAK,EAAC,uBAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAI,QAAA,KAAK,EAAC,UAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAArB,MADF,EAC2CX,UAAU,CAACgF,WAAX,CAAuB,KAAKzE,KAAL,CAAWI,UAAlC,CAD3C,CADF,EAIA;AAAI,QAAA,KAAK,EAAC,WAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKS,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAL,kBAAtB,CAJA,CAFD,GASA,IAnBD,CAFQ,EAsBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAtBC,EAuBR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAvBQ,CAAV;AAyBD;;AAEH,WACI,0CAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAF,EACA,oBAAC,MAAD;AAAQ,MAAA,KAAK,EAAC,WAAd;AAA2B,MAAA,KAAK,EAAE;AAAC4D,QAAAA,KAAK,EAAC;AAAP,OAAlC;AAAkD,MAAA,EAAE,EAAE/E,IAAtD;AAA4D,MAAA,EAAE,EAAE,aAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADA,EAEA,oBAAC,MAAD;AAAQ,MAAA,KAAK,EAAC,WAAd;AAA2B,MAAA,KAAK,EAAE;AAAC+E,QAAAA,KAAK,EAAC;AAAP,OAAlC;AAAmD,MAAA,EAAE,EAAE/E,IAAvD;AAA6D,MAAA,EAAE,EAAE,SAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFA,QAE6F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAF7F,EAEmG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFnG,EAGC4E,KAHD,EAIA,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAE,KAAKL,SAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAJA,EAKC,KAAKlE,KAAL,CAAWI,UAAX,CAAsBmC,OAAtB,GACA,oBAAC,KAAD;AACA,MAAA,IAAI,EAAE,KAAKvC,KAAL,CAAWI,UADjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,GAGM,IARP,EAWL,KAAKJ,KAAL,CAAWI,UAAX,CAAsBmC,OAAtB,GACM,oBAAC,MAAD;AACA,MAAA,IAAI,EAAE,KAAKvC,KAAL,CAAWI,UADjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADN,GAIY,IAfP,CADJ;AAwBC;;AAxNiC;;AA2NpC,eAAeN,MAAf","sourcesContent":["import React from 'react';\nimport FetchApi from '../../utility/apiCalls';\nimport FetchTable from '../../utility/tableContent';\nimport { Button } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\nimport '../../Assets/tableEdit.css';\nimport Chart from '../../Charts/component/chart';\nimport Chart2 from '../../Charts/component/chart2';\n\n\nclass Fetch2 extends React.Component{\n\n  state={\n        data:[],\n        actualData:[],\n        length:'',\n        totalCount:[]\n  }\n\n  componentDidMount =async()=>{ \n\n    const data1 = await this.data();\n    console.log(\"DATA 1 ===>>>\", data1);\n    const data2 = await this.data2();\n    console.log(\"Data 2  => \",data2);\n    console.log(\"updated array : \",this.state.actualData);\n    }\n\n    tableData=()=>{\n      FetchTable.tableHeader(this.state.data);\n    }\n\n    data =() =>{\n      let project = localStorage.getItem('project');\n     return new Promise( (resolve, reject) => {\n      let url = localStorage.getItem('url');\n      let arrayOfUsers = [];\n      \n      FetchApi.callApi(`${url}/rest/api/2/user/assignable/search?project=${project}`).then(res => {\n        for(let i=0;i<res.length;i++){\n              arrayOfUsers.push(res[i].name);\n            }\n            this.setState({data : arrayOfUsers});\n            resolve(arrayOfUsers);\n         \n          }).catch(error => {\n        reject(error);\n          })\n\n     } )\n    }\n\n    data2=()=>{\n      let project = localStorage.getItem('project');\n      let url = localStorage.getItem('url');\n      let array = [];\n      return new Promise( (resolve, reject) => {\n\n      for(let i=0;i<this.state.data.length;i++){\n        const api = FetchApi.callApi(`${url}/rest/api/3/search?jql=assignee=${this.state.data[i]}`);\n      api.then(res => {\n                let inProgressStoryPointCount = 0;\n                let todoStoryPoint = 0;\n                let doneStoryPoint = 0;\n                let reviewStoryPoint = 0;\n                let acceptedStoryPoint = 0;\n                let resolvedStoryPoint = 0;\n                let inProgressSum = 0;\n                let acceptedSum = 0;\n                let todoSum = 0;\n                let reviewSum = 0;\n                let resolvedSum = 0;\n                let doneSum = 0;\n                let storyPointSum = 0;\n                let anotherArray = [];\n                let storyPoint = 0;\n                let count = res.total;\n\n                for(let i =0;i<count ;i++){\n                  if(res.issues[i].fields.project.key ===  `${[project]}`){\n                    anotherArray.push(res.issues[i].fields.assignee.name);\n                    storyPoint =storyPoint +  res.issues[i].fields.customfield_10024;\n                  \n                    if(res.issues[i].fields.status.name === \"In Progress\"){\n                        inProgressStoryPointCount = inProgressStoryPointCount + res.issues[i].fields.customfield_10024;\n                        \n                      }\n                    \n                     if(res.issues[i].fields.status.name === \"To Do\" || res.issues[i].fields.status.name === \"Open\"){\n                        todoStoryPoint = todoStoryPoint + res.issues[i].fields.customfield_10024;\n            \n                      }\n                    \n                      if(res.issues[i].fields.status.name === \"Done\"){\n                        doneStoryPoint = doneStoryPoint + res.issues[i].fields.customfield_10024;\n                    \n                      }\n                    \n                       if(res.issues[i].fields.status.name === \"Review\"){\n                        reviewStoryPoint = reviewStoryPoint + res.issues[i].fields.customfield_10024;\n                        \n                      }\n\n                       if(res.issues[i].fields.status.name === \"Accepted\"){\n                        acceptedStoryPoint = acceptedStoryPoint + res.issues[i].fields.customfield_10024;\n                      }\n                    \n                       if(res.issues[i].fields.status.name === \"Resolved\"){\n                        resolvedStoryPoint = resolvedStoryPoint + res.issues[i].fields.customfield_10024;\n                      }\n\n                  }\n   \n\n                  \n                }\n                \n\n               let obj ={\n                   \n                    assignee:res.issues[0].fields.assignee.name,\n                    open:todoStoryPoint,\n                    accepted:acceptedStoryPoint,\n                    in_Progress:inProgressStoryPointCount,\n                    review:reviewStoryPoint,\n                    resolved:resolvedStoryPoint,  \n                    done:doneStoryPoint,\n\n                    story_point:storyPoint\n                }\n\n               \n                this.setState({actualData:[...this.state.actualData,obj]});\n                         \n                if(this.state.data.length-1 === this.state.actualData.length-1){\n                  for(let i=0;i<this.state.actualData.length;i++){\n                    inProgressSum = inProgressSum + this.state.actualData[i].in_Progress;\n                    acceptedSum = acceptedSum + this.state.actualData[i].accepted;\n                    todoSum = todoSum + this.state.actualData[i].open;\n                    reviewSum = reviewSum + this.state.actualData[i].review;\n                    resolvedSum = resolvedSum + this.state.actualData[i].resolved;\n                    doneSum = doneSum + this.state.actualData[i].done;\n                    storyPointSum = storyPointSum + this.state.actualData[i].story_point;\n                  }\n                  let obj2 = {\n                    todoSum :todoSum,\n                    acceptedSum :acceptedSum,\n                    inProgressSum:inProgressSum,\n                    reviewSum :reviewSum,\n                    resolvedSum :resolvedSum,\n                    doneSum :doneSum,\n                    storyPointSum:storyPointSum\n                  }\n                this.setState({totalCount:obj2});\n                localStorage.setItem('sum',JSON.stringify(obj2));\n                resolve(array);\n            }\n\n      }).catch(error => {\n        reject(error);\n          })\n      }  \n    })\n  }\n    \n    lastTable=()=>{\n        this.props.history.goBack();\n    }\n\n   \n   \n  render(){\n    //debugger;\n    let posts ;\n    if(this.state.actualData.length > 0) {\n      posts =   <><br/>\n      <p class=\"tableHeader\">Story Points by Assignee and Status</p>\n        <table class=\"table\">\n          <thead class=\"headerStyle\">\n            <tr>\n              {FetchTable.tableHeader(this.state.actualData)}\n            </tr>\n          </thead>\n\n          <tbody>\n              {FetchTable.tableRow(this.state.actualData)}\n          </tbody>\n        {this.state.totalCount ? \n\n          <tfoot>\n            <tr class=\"specificRowBackground\">\n              <td class=\"editRow \"><b>Total:</b> </td>{FetchTable.tableFooter(this.state.totalCount)}\n            </tr>\n          <tr class=\"editRow  \"><td>{localStorage.getItem('total')} total issues</td></tr>\n          {/* <Chart count ={this.state.totalCount} /> */}\n          </tfoot>\n        :null}   \n       </table><hr/>\n        <br/>\n        </>\n    }\n  \n  return(\n      <><br />\n      <Button class=\"ui button\"  style={{float:'left'}} as={Link} to ='/tablesheet'>Project List</Button>\n      <Button class=\"ui button\"  style={{float:'right'}} as={Link} to ='/logout'>Log out</Button>  <br /><br />\n      {posts}\n      <Button onClick={this.lastTable}>  Previous  </Button>\n      {this.state.totalCount.todoSum  ? \n       <Chart\n       data={this.state.totalCount}\n        />  :null\n      }\n\n{this.state.totalCount.todoSum  ? \n       <Chart2\n       data={this.state.totalCount}\n      \n        />  :null}\n      \n\n      \n      \n      </>\n\n    )\n  }\n}\n\nexport default Fetch2;\n"]},"metadata":{},"sourceType":"module"}