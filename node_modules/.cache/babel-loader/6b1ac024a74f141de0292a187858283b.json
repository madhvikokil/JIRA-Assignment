{"ast":null,"code":"var _jsxFileName = \"/home/madhavi/Documents/jira-assignment/JIRA-Assignment/src/Projects/container/tableOne.js\";\nimport React from 'react';\nimport FetchApi from '../../utility/apiCalls';\nimport FetchTable from '../../utility/tableContent';\nimport { Link } from 'react-router-dom';\nimport { Button } from 'semantic-ui-react';\nimport '../../Assets/tableEdit.css';\n\nclass Fetch extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: [],\n      actualData: [],\n      length: '',\n      totalCount: []\n    };\n\n    this.componentDidMount = async () => {\n      const data1 = await this.apiCallFirst();\n      console.log(\"DATA 1 ===>>>\", data1);\n      const data2 = await this.apiCallSecond();\n      console.log(\"Data 2  => \", data2);\n      console.log(\"updated array : \", this.state.actualData);\n    };\n\n    this.apiCallFirst = () => {\n      let project = localStorage.getItem('project');\n      return new Promise((resolve, reject) => {\n        let url = localStorage.getItem('url');\n        let arrayOfUsers = [];\n        FetchApi.callApi(\"\".concat(url, \"/rest/api/2/user/assignable/search?project=\").concat(project)).then(res => {\n          console.log(\"response : \", res);\n          console.log(res.length);\n\n          for (let i = 0; i < res.length; i++) {\n            arrayOfUsers.push(res[i].name);\n          }\n\n          this.setState({\n            data: arrayOfUsers\n          });\n          resolve(arrayOfUsers);\n        }).catch(error => {\n          console.log(\"error : \", error);\n          reject(error);\n        });\n      });\n    };\n\n    this.apiCallSecond = () => {\n      let project = localStorage.getItem('project');\n      let url = localStorage.getItem('url');\n      let array = [];\n      return new Promise((resolve, reject) => {\n        for (let i = 0; i < this.state.data.length; i++) {\n          const api = FetchApi.callApi(\"\".concat(url, \"/rest/api/3/search?jql=assignee=\").concat(this.state.data[i]));\n          api.then(res => {\n            console.log(\"response after data fetching : \", res);\n            let timeOriginalEstimate = 0;\n            let storyPoint = 0;\n            let timeEstimate = 0;\n            let timeSpent = 0;\n            let count = res.total;\n            let issueCountSum = 0;\n            let storyPointSum = 0;\n            let originalSum = 0;\n            let remainingSum = 0;\n            let spentSum = 0;\n            let anotherArray = [];\n            let finalCount = 0;\n\n            for (let i = 0; i < count; i++) {\n              if (res.issues[i].fields.project.key === \"\".concat([project])) {\n                storyPoint = storyPoint + res.issues[i].fields.customfield_10024;\n                timeEstimate = timeEstimate + res.issues[i].fields.timeestimate;\n                timeSpent = timeSpent + res.issues[i].fields.timespent;\n                timeOriginalEstimate = timeOriginalEstimate + res.issues[i].fields.timeoriginalestimate;\n                console.log(\"name of the user' : \", res.issues[i].fields.assignee.name);\n                anotherArray.push(res.issues[i].fields.assignee.name);\n                console.log(anotherArray);\n                console.log(\"length : \", anotherArray.length);\n              }\n\n              finalCount = anotherArray.length;\n            }\n\n            let value = Math.floor(timeSpent / 3600);\n            let value2 = Math.floor(timeOriginalEstimate / 3600);\n            let value3 = Math.floor(timeEstimate / 3600);\n            let obj = {\n              user: res.issues[0].fields.assignee.name,\n              issue_count: finalCount,\n              story_Point: storyPoint,\n              Original_Estimate_in_days: value2,\n              remaining_Estimate_in_days: value3,\n              time_Spent_in_days: value\n            };\n            this.setState({\n              actualData: [...this.state.actualData, obj]\n            });\n\n            if (this.state.data.length - 1 === this.state.actualData.length - 1) {\n              for (let i = 0; i < this.state.actualData.length; i++) {\n                issueCountSum = issueCountSum + this.state.actualData[i].issue_count;\n                storyPointSum = storyPointSum + this.state.actualData[i].story_Point;\n                originalSum = originalSum + this.state.actualData[i].Original_Estimate_in_days;\n                remainingSum = remainingSum + this.state.actualData[i].remaining_Estimate_in_days;\n                spentSum = spentSum + this.state.actualData[i].time_Spent_in_days;\n              }\n\n              let obj2 = {\n                issueCountSum: issueCountSum,\n                storyPointSum: storyPointSum,\n                originalSum: originalSum,\n                remainingSum: remainingSum,\n                spentSum: spentSum\n              };\n              this.setState({\n                totalCount: obj2\n              });\n              localStorage.setItem('total', this.state.totalCount.issueCountSum);\n              localStorage.setItem('issuecount', JSON.stringify(obj2));\n              let s = JSON.parse(localStorage.getItem('issuecount'));\n              console.log(\"get Item : \", s.issueCountSum);\n              resolve(array);\n            }\n          }).catch(error => {\n            console.log(\"error : \", error);\n            reject(error);\n          });\n        }\n      });\n    };\n\n    this.anotherTable = () => {\n      console.log(\"Next Table\");\n      this.props.history.push(\"/tableSheet/table2\");\n    };\n  }\n\n  render() {\n    debugger;\n    let posts;\n\n    if (this.state.actualData.length > 0) {\n      posts = React.createElement(React.Fragment, null, \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        class: \"tableHeader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"Release Multiple Output Statistics\"), React.createElement(\"table\", {\n        class: \"table\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        class: \"headerStyle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, FetchTable.tableHeader(this.state.actualData))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, FetchTable.tableRow(this.state.actualData, this.state.totalCount)), this.state.totalCount ? React.createElement(\"tfoot\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        class: \"specificRowBackground\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        class: \"editRow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, \"Total:\"), \" \"), \" \", FetchTable.tableFooter(this.state.totalCount, 'table1')), React.createElement(\"tr\", {\n        class: \"editRow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, this.state.totalCount.issueCountSum, \" total issues \"))) : null), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }));\n    }\n\n    return React.createElement(React.Fragment, null, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }), React.createElement(Button, {\n      class: \"ui button\",\n      style: {\n        float: 'left'\n      },\n      as: Link,\n      to: \"/tablesheet\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \"Project List\"), React.createElement(Button, {\n      class: \"ui button\",\n      style: {\n        float: 'right'\n      },\n      as: Link,\n      to: \"/logout\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, \"Log out\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }), posts, React.createElement(Button, {\n      onClick: this.anotherTable,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \" Next >> \"));\n  }\n\n}\n\nexport default Fetch;","map":{"version":3,"sources":["/home/madhavi/Documents/jira-assignment/JIRA-Assignment/src/Projects/container/tableOne.js"],"names":["React","FetchApi","FetchTable","Link","Button","Fetch","Component","state","data","actualData","length","totalCount","componentDidMount","data1","apiCallFirst","console","log","data2","apiCallSecond","project","localStorage","getItem","Promise","resolve","reject","url","arrayOfUsers","callApi","then","res","i","push","name","setState","catch","error","array","api","timeOriginalEstimate","storyPoint","timeEstimate","timeSpent","count","total","issueCountSum","storyPointSum","originalSum","remainingSum","spentSum","anotherArray","finalCount","issues","fields","key","customfield_10024","timeestimate","timespent","timeoriginalestimate","assignee","value","Math","floor","value2","value3","obj","user","issue_count","story_Point","Original_Estimate_in_days","remaining_Estimate_in_days","time_Spent_in_days","obj2","setItem","JSON","stringify","s","parse","anotherTable","props","history","render","posts","tableHeader","tableRow","tableFooter","float"],"mappings":"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","sourcesContent":["import React from 'react';\nimport FetchApi from '../../utility/apiCalls';\nimport FetchTable from '../../utility/tableContent';\nimport { Link } from 'react-router-dom';\nimport { Button } from 'semantic-ui-react';\nimport '../../Assets/tableEdit.css';\n\nclass Fetch extends React.Component{\n  \n  state = {\n        data:[],\n        actualData:[],\n        length:'',\n        totalCount:[]\n  }\n  \n  componentDidMount = async() => { \n      \n    const data1 = await this.apiCallFirst();\n    console.log(\"DATA 1 ===>>>\", data1);\n    const data2 = await this.apiCallSecond();\n    console.log(\"Data 2  => \",data2);\n    console.log(\"updated array : \",this.state.actualData);\n  \n    }\n\n    apiCallFirst =() =>{\n      let project = localStorage.getItem('project');\n      return new Promise( (resolve, reject) => {\n      let url = localStorage.getItem('url');\n      let arrayOfUsers = [];\n      \n      FetchApi.callApi(`${url}/rest/api/2/user/assignable/search?project=${project}`).then(res => {\n        console.log(\"response : \",res);\n        console.log(res.length);\n        for(let i=0;i<res.length;i++){\n              arrayOfUsers.push(res[i].name);\n        }\n            \n        this.setState({data : arrayOfUsers});\n        resolve(arrayOfUsers);\n            \n      }).catch(error => {\n        console.log(\"error : \",error);\n        reject(error);\n          })\n      })\n    }\n\n    apiCallSecond=()=>{\n      let project = localStorage.getItem('project');\n      let url = localStorage.getItem('url');\n      let array = [];\n      return new Promise( (resolve, reject) => {\n\n      for(let i=0;i<this.state.data.length;i++){\n        const api = FetchApi.callApi(`${url}/rest/api/3/search?jql=assignee=${this.state.data[i]}`);\n      api.then(res => {\n        console.log(\"response after data fetching : \",res);\n        let timeOriginalEstimate = 0;\n        let storyPoint = 0;\n        let timeEstimate = 0;\n        let timeSpent = 0;\n        let count = res.total;\n        let issueCountSum = 0;\n        let storyPointSum = 0;\n        let originalSum = 0;\n        let remainingSum = 0;\n        let spentSum = 0;\n        let anotherArray = [];\n        let finalCount = 0;\n\n        for(let i = 0; i < count ; i++){\n          \n           if(res.issues[i].fields.project.key === `${[project]}`) {\n            storyPoint =storyPoint +  res.issues[i].fields.customfield_10024;\n            timeEstimate = timeEstimate + res.issues[i].fields.timeestimate;\n            timeSpent = timeSpent + res.issues[i].fields.timespent;\n            timeOriginalEstimate = timeOriginalEstimate + res.issues[i].fields.timeoriginalestimate;\n            console.log(\"name of the user' : \",res.issues[i].fields.assignee.name);\n            anotherArray.push(res.issues[i].fields.assignee.name);\n            console.log(anotherArray);\n            console.log(\"length : \",anotherArray.length);\n           }\n\n           finalCount = anotherArray.length;\n        }\n        \n        let value = Math.floor(timeSpent/3600);\n        let value2 = Math.floor(timeOriginalEstimate/3600);\n        let value3 = Math.floor(timeEstimate/3600);\n\n        let obj ={\n            user : res.issues[0].fields.assignee.name,\n            issue_count : finalCount,\n            story_Point : storyPoint,\n            Original_Estimate_in_days : value2,\n            remaining_Estimate_in_days : value3,\n            time_Spent_in_days : value\n          }\n       \n        this.setState({actualData:[...this.state.actualData,obj]});\n        if(this.state.data.length-1 === this.state.actualData.length-1) {\n\n          for(let i=0;i<this.state.actualData.length;i++) {\n            issueCountSum = issueCountSum + this.state.actualData[i].issue_count;\n            storyPointSum = storyPointSum + this.state.actualData[i].story_Point;\n            originalSum = originalSum + this.state.actualData[i].Original_Estimate_in_days;\n            remainingSum = remainingSum + this.state.actualData[i].remaining_Estimate_in_days;\n            spentSum = spentSum + this.state.actualData[i].time_Spent_in_days;\n          }\n\n          let obj2 = {\n              issueCountSum : issueCountSum,\n              storyPointSum : storyPointSum,\n              originalSum : originalSum,\n              remainingSum : remainingSum,\n              spentSum : spentSum\n          }\n\n          this.setState({totalCount:obj2});\n          localStorage.setItem('total',this.state.totalCount.issueCountSum);\n          localStorage.setItem('issuecount',JSON.stringify(obj2));\n          let s = JSON.parse(localStorage.getItem('issuecount'));   \n          console.log(\"get Item : \",s.issueCountSum);\n         \n          resolve(array);\n        }  \n             \n      }).catch(error => {\n        console.log(\"error : \",error);\n        reject(error);\n      })\n    }  \n  })\n  }\n\n    anotherTable = () => {\n      console.log(\"Next Table\");\n      this.props.history.push(\"/tableSheet/table2\");\n    }\n     \n    render(){\n    debugger;\n    let posts ;\n    if(this.state.actualData.length > 0) {\n      posts =   <> <br/><p class=\"tableHeader\">Release Multiple Output Statistics</p>\n        <table class=\"table\">\n          <thead class=\"headerStyle\">\n           \n            <tr >\n              {FetchTable.tableHeader(this.state.actualData)}\n            </tr>\n          </thead>\n\n          <tbody>\n              {FetchTable.tableRow(this.state.actualData,this.state.totalCount)}\n          </tbody>\n          \n          {this.state.totalCount ? \n          <tfoot >\n            <tr class=\"specificRowBackground\">\n              <td class=\"editRow\"><b>Total:</b> </td> {FetchTable.tableFooter(this.state.totalCount,'table1')}\n            </tr>\n             \n         <tr class=\"editRow\" ><td>{this.state.totalCount.issueCountSum} total issues </td></tr>\n         \n      </tfoot>\n      : null}\n        </table>\n        <hr/><br/>\n      \n        </>\n    }\n  \n  return(\n      <><br />\n      <Button class=\"ui button\"  style={{float:'left'}} as={Link} to ='/tablesheet'>Project List</Button>\n      <Button class=\"ui button\"  style={{float:'right'}} as={Link} to ='/logout'>Log out</Button><br /><br />\n      {posts}\n      <Button onClick={this.anotherTable}> Next >> </Button>\n      \n      </>\n\n    )\n  }\n}\n\n\nexport default Fetch;"]},"metadata":{},"sourceType":"module"}